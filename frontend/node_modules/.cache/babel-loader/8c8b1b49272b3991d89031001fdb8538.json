{"ast":null,"code":"import _objectSpread from\"/mnt/Datengrab/python/Zero-tier/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/mnt/Datengrab/python/Zero-tier/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/mnt/Datengrab/python/Zero-tier/frontend/node_modules/@babel/runtime/regenerator/index.js\";import{Accordion,AccordionSummary,AccordionDetails,Checkbox,Divider,Grid,Typography,TextField,Select}from\"@material-ui/core\";import ExpandMoreIcon from\"@material-ui/icons/ExpandMore\";import ManagedRoutes from\"./components/ManagedRoutes\";import IPv4AutoAssign from\"./components/IPv4AutoAssign\";import API from\"utils/API\";import{parseValue,replaceValue,setValue}from\"utils/ChangeHelper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function NetworkSettings(_ref){var network=_ref.network,setNetwork=_ref.setNetwork;console.log(\"NETWORK\",network);var sendReq=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var req;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return API.post(\"/network/\"+network[\"config\"][\"id\"],data);case 3:req=_context.sent;console.log(\"Action\",req);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function sendReq(_x){return _ref2.apply(this,arguments);};}();var handleChange=function handleChange(key1,key2){var mode=arguments.length>2&&arguments[2]!==undefined?arguments[2]:\"text\";var additionalData=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;return function(event){var value=parseValue(event,mode,additionalData);var updatedNetwork=replaceValue(_objectSpread({},network),key1,key2,value);setNetwork(updatedNetwork);var data=setValue({},key1,key2,value);sendReq(data);};};return/*#__PURE__*/_jsxs(Accordion,{children:[/*#__PURE__*/_jsx(AccordionSummary,{expandIcon:/*#__PURE__*/_jsx(ExpandMoreIcon,{}),children:/*#__PURE__*/_jsx(Typography,{children:\"General settings\"})}),/*#__PURE__*/_jsx(AccordionDetails,{children:/*#__PURE__*/_jsxs(Grid,{container:true,direction:\"column\",spacing:3,children:[/*#__PURE__*/_jsxs(Grid,{item:true,children:[/*#__PURE__*/_jsx(Typography,{children:\"Network ID\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",children:/*#__PURE__*/_jsx(\"span\",{children:network[\"config\"][\"id\"]})})]}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(TextField,{value:network[\"config\"][\"name\"],onChange:handleChange(\"config\",\"name\"),label:\"Name\",variant:\"filled\",InputLabelProps:{shrink:true}})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(TextField,{value:network[\"description\"],onChange:handleChange(\"description\"),multiline:true,rows:2,rowsMax:Infinity,label:\"Description\",variant:\"filled\",InputLabelProps:{shrink:true}})}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(Grid,{item:true,children:[/*#__PURE__*/_jsx(Typography,{children:\"Access Control\"}),/*#__PURE__*/_jsxs(Select,{native:true,value:network[\"config\"][\"private\"],onChange:handleChange(\"config\",\"private\",\"json\"),children:[/*#__PURE__*/_jsx(\"option\",{value:true,children:\"Private\"}),/*#__PURE__*/_jsx(\"option\",{value:false,children:\"Public\"})]})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(ManagedRoutes,{routes:network[\"config\"][\"routes\"],handleChange:handleChange})}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(IPv4AutoAssign,{ipAssignmentPools:network[\"config\"][\"ipAssignmentPools\"],handleChange:handleChange})}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(TextField,{label:\"Multicast Recipient Limit\",type:\"number\",value:network[\"config\"][\"multicastLimit\"],onChange:handleChange(\"config\",\"multicastLimit\",\"json\"),InputLabelProps:{shrink:true}})}),/*#__PURE__*/_jsxs(Grid,{item:true,children:[/*#__PURE__*/_jsx(Checkbox,{checked:network[\"config\"][\"enableBroadcast\"],color:\"primary\",onChange:handleChange(\"config\",\"enableBroadcast\",\"checkbox\")}),/*#__PURE__*/_jsx(\"span\",{children:\"Enable Broadcast\"})]})]})})]});}export default NetworkSettings;","map":{"version":3,"names":["Accordion","AccordionSummary","AccordionDetails","Checkbox","Divider","Grid","Typography","TextField","Select","ExpandMoreIcon","ManagedRoutes","IPv4AutoAssign","API","parseValue","replaceValue","setValue","NetworkSettings","network","setNetwork","console","log","sendReq","data","post","req","error","handleChange","key1","key2","mode","additionalData","event","value","updatedNetwork","shrink","Infinity"],"sources":["/mnt/Datengrab/python/Zero-tier/frontend/src/components/NetworkSettings/NetworkSettings.jsx"],"sourcesContent":["import {\n  Accordion,\n  AccordionSummary,\n  AccordionDetails,\n  Checkbox,\n  Divider,\n  Grid,\n  Typography,\n  TextField,\n  Select,\n} from \"@material-ui/core\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\n\nimport ManagedRoutes from \"./components/ManagedRoutes\";\nimport IPv4AutoAssign from \"./components/IPv4AutoAssign\";\n\nimport API from \"utils/API\";\nimport { parseValue, replaceValue, setValue } from \"utils/ChangeHelper\";\n\nfunction NetworkSettings({ network, setNetwork }) {\n  console.log(\"NETWORK\", network);\n  const sendReq = async (data) => {\n    try {\n      const req = await API.post(\"/network/\" + network[\"config\"][\"id\"], data);\n      console.log(\"Action\", req);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const handleChange =\n    (key1, key2, mode = \"text\", additionalData = null) =>\n    (event) => {\n      const value = parseValue(event, mode, additionalData);\n\n      let updatedNetwork = replaceValue({ ...network }, key1, key2, value);\n      setNetwork(updatedNetwork);\n\n      let data = setValue({}, key1, key2, value);\n\n      sendReq(data);\n    };\n\n  return (\n    <Accordion>\n      <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n        <Typography>General settings</Typography>\n      </AccordionSummary>\n      <AccordionDetails>\n        <Grid container direction=\"column\" spacing={3}>\n          <Grid item>\n            <Typography>Network ID</Typography>\n            <Typography variant=\"h5\">\n              <span>{network[\"config\"][\"id\"]}</span>\n            </Typography>\n          </Grid>\n          <Grid item>\n            <TextField\n              value={network[\"config\"][\"name\"]}\n              onChange={handleChange(\"config\", \"name\")}\n              label=\"Name\"\n              variant=\"filled\"\n              InputLabelProps={{\n                shrink: true,\n              }}\n            />\n          </Grid>\n          <Grid item>\n            <TextField\n              value={network[\"description\"]}\n              onChange={handleChange(\"description\")}\n              multiline\n              rows={2}\n              rowsMax={Infinity}\n              label=\"Description\"\n              variant=\"filled\"\n              InputLabelProps={{\n                shrink: true,\n              }}\n            />\n          </Grid>\n          <Divider />\n          <Grid item>\n            <Typography>Access Control</Typography>\n            <Select\n              native\n              value={network[\"config\"][\"private\"]}\n              onChange={handleChange(\"config\", \"private\", \"json\")}\n            >\n              <option value={true}>Private</option>\n              <option value={false}>Public</option>\n            </Select>\n          </Grid>\n          <Divider />\n          <Grid item>\n            <ManagedRoutes\n              routes={network[\"config\"][\"routes\"]}\n              handleChange={handleChange}\n            />\n          </Grid>\n          <Divider />\n          <Grid item>\n            <IPv4AutoAssign\n              ipAssignmentPools={network[\"config\"][\"ipAssignmentPools\"]}\n              handleChange={handleChange}\n            />\n          </Grid>\n          {/* TODO: */}\n          {/* <Grid item>\n            <Typography>IPv6 Auto-Assign</Typography>\n          </Grid> */}\n          <Divider />\n          <Grid item>\n            <TextField\n              label=\"Multicast Recipient Limit\"\n              type=\"number\"\n              value={network[\"config\"][\"multicastLimit\"]}\n              onChange={handleChange(\"config\", \"multicastLimit\", \"json\")}\n              InputLabelProps={{\n                shrink: true,\n              }}\n            />\n          </Grid>\n          <Grid item>\n            <Checkbox\n              checked={network[\"config\"][\"enableBroadcast\"]}\n              color=\"primary\"\n              onChange={handleChange(\"config\", \"enableBroadcast\", \"checkbox\")}\n            />\n            <span>Enable Broadcast</span>\n          </Grid>\n          {/* TODO: */}\n          {/* <Grid item>\n            <Typography>DNS</Typography>\n          </Grid> */}\n        </Grid>\n      </AccordionDetails>\n    </Accordion>\n  );\n}\n\nexport default NetworkSettings;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}