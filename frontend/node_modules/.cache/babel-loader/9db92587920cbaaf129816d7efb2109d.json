{"ast":null,"code":"import _asyncToGenerator from\"/mnt/Datengrab/python/Zero-tier/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/mnt/Datengrab/python/Zero-tier/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/mnt/Datengrab/python/Zero-tier/frontend/node_modules/@babel/runtime/regenerator/index.js\";import{Grid,Link,Typography}from\"@material-ui/core\";import ArrowBackIcon from\"@material-ui/icons/ArrowBack\";import NetworkHeader from\"components/NetworkHeader\";import NetworkManagement from\"components/NetworkManagement\";import NetworkMembers from\"components/NetworkMembers\";import NetworkRules from\"components/NetworkRules\";import NetworkSettings from\"components/NetworkSettings\";import{useCallback,useEffect,useState}from\"react\";import{Link as RouterLink,useHistory,useParams}from\"react-router-dom\";import{useLocalStorage}from\"react-use\";import API from\"utils/API\";import useStyles from\"./Network.styles\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Network(){var _useParams=useParams(),nwid=_useParams.nwid;var _useLocalStorage=useLocalStorage(\"loggedIn\",false),_useLocalStorage2=_slicedToArray(_useLocalStorage,1),loggedIn=_useLocalStorage2[0];var _useState=useState({}),_useState2=_slicedToArray(_useState,2),network=_useState2[0],setNetwork=_useState2[1];var classes=useStyles();var history=useHistory();var fetchData=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _network;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return API.get(\"network/\"+nwid);case 3:_network=_context.sent;console.log(\"Current network:\",_network.data.data);setNetwork(_network.data.data);_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);if(_context.t0.response.status===404){history.push(\"/404\");}console.error(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);})),[nwid,history]);useEffect(function(){fetchData();},[nwid,fetchData]);if(loggedIn){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Link,{color:\"inherit\",component:RouterLink,to:\"/\",underline:\"none\",children:[/*#__PURE__*/_jsx(ArrowBackIcon,{className:classes.backIcon}),\"Networks\"]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.container,children:[network[\"config\"]&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NetworkHeader,{network:network}),/*#__PURE__*/_jsx(NetworkSettings,{network:network,setNetwork:setNetwork})]}),/*#__PURE__*/_jsx(NetworkMembers,{network:network}),network[\"config\"]&&/*#__PURE__*/_jsx(NetworkRules,{network:network,callback:fetchData}),/*#__PURE__*/_jsx(NetworkManagement,{})]})]});}else{return/*#__PURE__*/_jsx(Grid,{container:true,spacing:0,direction:\"column\",alignItems:\"center\",justify:\"center\",style:{minHeight:\"50vh\"},children:/*#__PURE__*/_jsx(Grid,{item:true,xs:10,children:/*#__PURE__*/_jsx(Typography,{variant:\"h5\",children:\"You are not authorized. Please Log In as Admin.\"})})});}}export default Network;","map":{"version":3,"names":["Grid","Link","Typography","ArrowBackIcon","NetworkHeader","NetworkManagement","NetworkMembers","NetworkRules","NetworkSettings","useCallback","useEffect","useState","RouterLink","useHistory","useParams","useLocalStorage","API","useStyles","Network","nwid","loggedIn","network","setNetwork","classes","history","fetchData","get","console","log","data","response","status","push","error","backIcon","container","minHeight"],"sources":["/mnt/Datengrab/python/Zero-tier/frontend/src/routes/Network/Network.jsx"],"sourcesContent":["import { Grid, Link, Typography } from \"@material-ui/core\";\nimport ArrowBackIcon from \"@material-ui/icons/ArrowBack\";\nimport NetworkHeader from \"components/NetworkHeader\";\nimport NetworkManagement from \"components/NetworkManagement\";\nimport NetworkMembers from \"components/NetworkMembers\";\nimport NetworkRules from \"components/NetworkRules\";\nimport NetworkSettings from \"components/NetworkSettings\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { Link as RouterLink, useHistory, useParams } from \"react-router-dom\";\nimport { useLocalStorage } from \"react-use\";\nimport API from \"utils/API\";\nimport useStyles from \"./Network.styles\";\n\nfunction Network() {\n  const { nwid } = useParams();\n  const [loggedIn] = useLocalStorage(\"loggedIn\", false);\n  const [network, setNetwork] = useState({});\n\n  const classes = useStyles();\n  const history = useHistory();\n\n  const fetchData = useCallback(async () => {\n    try {\n      const network = await API.get(\"network/\" + nwid);\n      console.log(\"Current network:\", network.data.data);\n      setNetwork(network.data.data);\n    } catch (err) {\n      if (err.response.status === 404) {\n        history.push(\"/404\");\n      }\n      console.error(err);\n    }\n  }, [nwid, history]);\n\n  useEffect(() => {\n    fetchData();\n  }, [nwid, fetchData]);\n\n  if (loggedIn) {\n    return (\n      <>\n        <Link color=\"inherit\" component={RouterLink} to=\"/\" underline=\"none\">\n          <ArrowBackIcon className={classes.backIcon}></ArrowBackIcon>\n          Networks\n        </Link>\n        <div className={classes.container}>\n          {network[\"config\"] && (\n            <>\n              <NetworkHeader network={network} />\n              <NetworkSettings network={network} setNetwork={setNetwork} />\n            </>\n          )}\n          <NetworkMembers network={network} />\n          {network[\"config\"] && (\n            <NetworkRules network={network} callback={fetchData} />\n          )}\n          <NetworkManagement />\n        </div>\n      </>\n    );\n  } else {\n    return (\n      <Grid\n        container\n        spacing={0}\n        direction=\"column\"\n        alignItems=\"center\"\n        justify=\"center\"\n        style={{\n          minHeight: \"50vh\",\n        }}\n      >\n        <Grid item xs={10}>\n          <Typography variant=\"h5\">\n            You are not authorized. Please Log In as Admin.\n          </Typography>\n        </Grid>\n      </Grid>\n    );\n  }\n}\n\nexport default Network;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}