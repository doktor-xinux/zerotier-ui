{"ast":null,"code":"import _toConsumableArray from\"/mnt/Datengrab/python/Zero-tier/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/mnt/Datengrab/python/Zero-tier/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{Button,Box,Divider,Grid,List,Typography,TextField,IconButton}from\"@material-ui/core\";import AddIcon from\"@material-ui/icons/Add\";import DeleteOutlineIcon from\"@material-ui/icons/DeleteOutline\";import DataTable from\"react-data-table-component\";import{addressPool}from\"utils/NetworkConfig\";import{getCIDRAddress,validateIP,normilizeIP}from\"utils/IP\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function IPv4AutoAssign(_ref){var ipAssignmentPools=_ref.ipAssignmentPools,handleChange=_ref.handleChange;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),start=_useState2[0],setStart=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),end=_useState4[0],setEnd=_useState4[1];var handleStartInput=function handleStartInput(event){setStart(event.target.value);};var handleEndInput=function handleEndInput(event){setEnd(event.target.value);};var setDefaultPool=function setDefaultPool(index){addPoolReq(addressPool[index][\"start\"],addressPool[index][\"end\"],true);handleChange(\"config\",\"routes\",\"custom\",[{target:getCIDRAddress(addressPool[index][\"start\"],addressPool[index][\"end\"])}])(null);};var addPoolReq=function addPoolReq(localStart,localEnd){var reset=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var data={};console.log(localStart,localEnd);if(validateIP(localStart)&&validateIP(localEnd)){data[\"ipRangeStart\"]=normilizeIP(localStart);data[\"ipRangeEnd\"]=normilizeIP(localEnd);}else{return;}var newPool=[];if(ipAssignmentPools&&!reset){newPool=_toConsumableArray(ipAssignmentPools);}newPool.push(data);console.log(newPool);handleChange(\"config\",\"ipAssignmentPools\",\"custom\",newPool)(null);setStart(\"\");setEnd(\"\");};var removePoolReq=function removePoolReq(index){var newPool=_toConsumableArray(ipAssignmentPools);newPool.splice(index,1);handleChange(\"config\",\"ipAssignmentPools\",\"custom\",newPool)(null);};var columns=[{id:\"remove\",width:\"10px\",cell:function cell(_,index){return/*#__PURE__*/_jsx(IconButton,{size:\"small\",color:\"secondary\",onClick:function onClick(){return removePoolReq(index);},children:/*#__PURE__*/_jsx(DeleteOutlineIcon,{style:{fontSize:14}})});}},{id:\"Start\",name:\"Start\",cell:function cell(row){return row[\"ipRangeStart\"];}},{id:\"End\",name:\"End\",cell:function cell(row){return row[\"ipRangeEnd\"];}}];return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Typography,{children:\"IPv4 Auto-Assign\"}),/*#__PURE__*/_jsx(\"div\",{style:{padding:\"30px\"},children:/*#__PURE__*/_jsx(Grid,{container:true,spacing:1,children:addressPool.map(function(item,index){return/*#__PURE__*/_jsx(Grid,{item:true,xs:3,children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",fullWidth:true,onClick:function onClick(){return setDefaultPool(index);},children:item[\"name\"]})},item[\"name\"]);})})}),/*#__PURE__*/_jsx(Typography,{style:{paddingBottom:\"10px\"},children:\"Auto-Assign Pools\"}),/*#__PURE__*/_jsx(Box,{border:1,borderColor:\"grey.300\",children:/*#__PURE__*/_jsxs(Grid,{item:true,style:{margin:\"10px\"},children:[/*#__PURE__*/_jsx(DataTable,{noHeader:true,columns:columns,data:ipAssignmentPools}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Typography,{children:\"Add IPv4 Pool\"}),/*#__PURE__*/_jsxs(List,{style:{display:\"flex\",flexDirection:\"row\"},children:[/*#__PURE__*/_jsx(TextField,{value:start,onChange:handleStartInput,placeholder:\"Start\"}),/*#__PURE__*/_jsx(Divider,{orientation:\"vertical\",style:{margin:\"10px\"},flexItem:true}),/*#__PURE__*/_jsx(TextField,{value:end,onChange:handleEndInput,placeholder:\"End\"}),/*#__PURE__*/_jsx(IconButton,{size:\"small\",color:\"primary\",onClick:function onClick(){return addPoolReq(start,end);},children:/*#__PURE__*/_jsx(AddIcon,{style:{fontSize:16}})})]})]})})]});}export default IPv4AutoAssign;","map":{"version":3,"names":["useState","Button","Box","Divider","Grid","List","Typography","TextField","IconButton","AddIcon","DeleteOutlineIcon","DataTable","addressPool","getCIDRAddress","validateIP","normilizeIP","IPv4AutoAssign","ipAssignmentPools","handleChange","start","setStart","end","setEnd","handleStartInput","event","target","value","handleEndInput","setDefaultPool","index","addPoolReq","localStart","localEnd","reset","data","console","log","newPool","push","removePoolReq","splice","columns","id","width","cell","_","fontSize","name","row","padding","map","item","paddingBottom","margin","display","flexDirection"],"sources":["/mnt/Datengrab/python/Zero-tier/frontend/src/components/NetworkSettings/components/IPv4AutoAssign/IPv4AutoAssign.jsx"],"sourcesContent":["import { useState } from \"react\";\n\nimport {\n  Button,\n  Box,\n  Divider,\n  Grid,\n  List,\n  Typography,\n  TextField,\n  IconButton,\n} from \"@material-ui/core\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\n\nimport DataTable from \"react-data-table-component\";\n\nimport { addressPool } from \"utils/NetworkConfig\";\nimport { getCIDRAddress, validateIP, normilizeIP } from \"utils/IP\";\n\nfunction IPv4AutoAssign({ ipAssignmentPools, handleChange }) {\n  const [start, setStart] = useState(\"\");\n  const [end, setEnd] = useState(\"\");\n\n  const handleStartInput = (event) => {\n    setStart(event.target.value);\n  };\n\n  const handleEndInput = (event) => {\n    setEnd(event.target.value);\n  };\n\n  const setDefaultPool = (index) => {\n    addPoolReq(addressPool[index][\"start\"], addressPool[index][\"end\"], true);\n\n    handleChange(\"config\", \"routes\", \"custom\", [\n      {\n        target: getCIDRAddress(\n          addressPool[index][\"start\"],\n          addressPool[index][\"end\"]\n        ),\n      },\n    ])(null);\n  };\n\n  const addPoolReq = (localStart, localEnd, reset = false) => {\n    let data = {};\n    console.log(localStart, localEnd);\n    if (validateIP(localStart) && validateIP(localEnd)) {\n      data[\"ipRangeStart\"] = normilizeIP(localStart);\n      data[\"ipRangeEnd\"] = normilizeIP(localEnd);\n    } else {\n      return;\n    }\n\n    let newPool = [];\n    if (ipAssignmentPools && !reset) {\n      newPool = [...ipAssignmentPools];\n    }\n    newPool.push(data);\n    console.log(newPool);\n\n    handleChange(\"config\", \"ipAssignmentPools\", \"custom\", newPool)(null);\n\n    setStart(\"\");\n    setEnd(\"\");\n  };\n\n  const removePoolReq = (index) => {\n    let newPool = [...ipAssignmentPools];\n    newPool.splice(index, 1);\n\n    handleChange(\"config\", \"ipAssignmentPools\", \"custom\", newPool)(null);\n  };\n\n  const columns = [\n    {\n      id: \"remove\",\n      width: \"10px\",\n      cell: (_, index) => (\n        <IconButton\n          size=\"small\"\n          color=\"secondary\"\n          onClick={() => removePoolReq(index)}\n        >\n          <DeleteOutlineIcon style={{ fontSize: 14 }} />\n        </IconButton>\n      ),\n    },\n    {\n      id: \"Start\",\n      name: \"Start\",\n      cell: (row) => row[\"ipRangeStart\"],\n    },\n    {\n      id: \"End\",\n      name: \"End\",\n      cell: (row) => row[\"ipRangeEnd\"],\n    },\n  ];\n\n  return (\n    <>\n      <Typography>IPv4 Auto-Assign</Typography>\n      <div\n        style={{\n          padding: \"30px\",\n        }}\n      >\n        <Grid container spacing={1}>\n          {addressPool.map((item, index) => (\n            <Grid item xs={3} key={item[\"name\"]}>\n              <Button\n                variant=\"contained\"\n                fullWidth={true}\n                onClick={() => setDefaultPool(index)}\n              >\n                {item[\"name\"]}\n              </Button>\n            </Grid>\n          ))}\n        </Grid>\n      </div>\n      <Typography style={{ paddingBottom: \"10px\" }}>\n        Auto-Assign Pools\n      </Typography>\n      <Box border={1} borderColor=\"grey.300\">\n        <Grid item style={{ margin: \"10px\" }}>\n          <DataTable\n            noHeader={true}\n            columns={columns}\n            data={ipAssignmentPools}\n          />\n          <Divider />\n          <Typography>Add IPv4 Pool</Typography>\n          <List\n            style={{\n              display: \"flex\",\n              flexDirection: \"row\",\n            }}\n          >\n            <TextField\n              value={start}\n              onChange={handleStartInput}\n              placeholder={\"Start\"}\n            />\n            <Divider\n              orientation=\"vertical\"\n              style={{\n                margin: \"10px\",\n              }}\n              flexItem\n            />\n            <TextField\n              value={end}\n              onChange={handleEndInput}\n              placeholder={\"End\"}\n            />\n            <IconButton\n              size=\"small\"\n              color=\"primary\"\n              onClick={() => addPoolReq(start, end)}\n            >\n              <AddIcon\n                style={{\n                  fontSize: 16,\n                }}\n              />\n            </IconButton>\n          </List>\n        </Grid>\n      </Box>\n    </>\n  );\n}\n\nexport default IPv4AutoAssign;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}