{"ast":null,"code":"import _toConsumableArray from\"/mnt/Datengrab/python/Zero-tier/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/mnt/Datengrab/python/Zero-tier/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{Box,Divider,Grid,List,Typography,TextField,IconButton}from\"@material-ui/core\";import AddIcon from\"@material-ui/icons/Add\";import DeleteOutlineIcon from\"@material-ui/icons/DeleteOutline\";import DataTable from\"react-data-table-component\";import{validateIP,normilizeIP,validateCIDR}from\"utils/IP\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function ManagedRoutes(_ref){var routes=_ref.routes,handleChange=_ref.handleChange;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),destination=_useState2[0],setDestination=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),via=_useState4[0],setVia=_useState4[1];var handleDestinationInput=function handleDestinationInput(event){setDestination(event.target.value);};var handleViaInput=function handleViaInput(event){setVia(event.target.value);};var addRouteReq=function addRouteReq(){var data={};if(validateCIDR(destination)){data[\"target\"]=destination;}else{return;}if(via&&validateIP(via)){data[\"via\"]=normilizeIP(via);}var newRoutes=_toConsumableArray(routes);newRoutes.push(data);handleChange(\"config\",\"routes\",\"custom\",newRoutes)(null);setDestination(\"\");setVia(\"\");};var removeRouteReq=function removeRouteReq(index){var newRoutes=_toConsumableArray(routes);newRoutes.splice(index,1);handleChange(\"config\",\"routes\",\"custom\",newRoutes)(null);};var columns=[{id:\"remove\",width:\"10px\",cell:function cell(_,index){return/*#__PURE__*/_jsx(IconButton,{size:\"small\",color:\"secondary\",onClick:function onClick(){return removeRouteReq(index);},children:/*#__PURE__*/_jsx(DeleteOutlineIcon,{style:{fontSize:14}})});}},{id:\"target\",name:\"Target\",cell:function cell(row){return row[\"target\"];}},{id:\"via\",name:\"via\",cell:function cell(row){return row[\"via\"]?row[\"via\"]:\"(LAN)\";}}];return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Typography,{style:{paddingBottom:\"10px\"},children:[\"Managed Routes (\",routes.length+\"/32\",\")\"]}),/*#__PURE__*/_jsx(Box,{border:1,borderColor:\"grey.300\",children:/*#__PURE__*/_jsxs(Grid,{item:true,style:{margin:\"10px\"},children:[/*#__PURE__*/_jsx(DataTable,{noHeader:true,columns:columns,data:routes}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Typography,{children:\"Add Routes\"}),/*#__PURE__*/_jsxs(List,{style:{display:\"flex\",flexDirection:\"row\"},children:[/*#__PURE__*/_jsx(TextField,{value:destination,onChange:handleDestinationInput,placeholder:\"Destination (CIDR)\"}),/*#__PURE__*/_jsx(Divider,{orientation:\"vertical\",style:{margin:\"10px\"},flexItem:true}),/*#__PURE__*/_jsx(TextField,{value:via,onChange:handleViaInput,placeholder:\"Via (Optional)\"}),/*#__PURE__*/_jsx(IconButton,{size:\"small\",color:\"primary\",onClick:addRouteReq,children:/*#__PURE__*/_jsx(AddIcon,{style:{fontSize:16}})})]})]})})]});}export default ManagedRoutes;","map":{"version":3,"names":["useState","Box","Divider","Grid","List","Typography","TextField","IconButton","AddIcon","DeleteOutlineIcon","DataTable","validateIP","normilizeIP","validateCIDR","ManagedRoutes","routes","handleChange","destination","setDestination","via","setVia","handleDestinationInput","event","target","value","handleViaInput","addRouteReq","data","newRoutes","push","removeRouteReq","index","splice","columns","id","width","cell","_","fontSize","name","row","paddingBottom","length","margin","display","flexDirection"],"sources":["/mnt/Datengrab/python/Zero-tier/frontend/src/components/NetworkSettings/components/ManagedRoutes/ManagedRoutes.jsx"],"sourcesContent":["import { useState } from \"react\";\n\nimport {\n  Box,\n  Divider,\n  Grid,\n  List,\n  Typography,\n  TextField,\n  IconButton,\n} from \"@material-ui/core\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\n\nimport DataTable from \"react-data-table-component\";\n\nimport { validateIP, normilizeIP, validateCIDR } from \"utils/IP\";\n\nfunction ManagedRoutes({ routes, handleChange }) {\n  const [destination, setDestination] = useState(\"\");\n  const [via, setVia] = useState(\"\");\n\n  const handleDestinationInput = (event) => {\n    setDestination(event.target.value);\n  };\n\n  const handleViaInput = (event) => {\n    setVia(event.target.value);\n  };\n\n  const addRouteReq = () => {\n    let data = {};\n    if (validateCIDR(destination)) {\n      data[\"target\"] = destination;\n    } else {\n      return;\n    }\n    if (via && validateIP(via)) {\n      data[\"via\"] = normilizeIP(via);\n    }\n\n    let newRoutes = [...routes];\n    newRoutes.push(data);\n\n    handleChange(\"config\", \"routes\", \"custom\", newRoutes)(null);\n\n    setDestination(\"\");\n    setVia(\"\");\n  };\n\n  const removeRouteReq = (index) => {\n    let newRoutes = [...routes];\n    newRoutes.splice(index, 1);\n\n    handleChange(\"config\", \"routes\", \"custom\", newRoutes)(null);\n  };\n\n  const columns = [\n    {\n      id: \"remove\",\n      width: \"10px\",\n      cell: (_, index) => (\n        <IconButton\n          size=\"small\"\n          color=\"secondary\"\n          onClick={() => removeRouteReq(index)}\n        >\n          <DeleteOutlineIcon style={{ fontSize: 14 }} />\n        </IconButton>\n      ),\n    },\n    {\n      id: \"target\",\n      name: \"Target\",\n      cell: (row) => row[\"target\"],\n    },\n    {\n      id: \"via\",\n      name: \"via\",\n      cell: (row) => (row[\"via\"] ? row[\"via\"] : \"(LAN)\"),\n    },\n  ];\n\n  return (\n    <>\n      <Typography style={{ paddingBottom: \"10px\" }}>\n        Managed Routes ({routes.length + \"/32\"})\n      </Typography>\n      <Box border={1} borderColor=\"grey.300\">\n        <Grid item style={{ margin: \"10px\" }}>\n          <DataTable noHeader={true} columns={columns} data={routes} />\n          <Divider />\n          <Typography>Add Routes</Typography>\n          <List\n            style={{\n              display: \"flex\",\n              flexDirection: \"row\",\n            }}\n          >\n            <TextField\n              value={destination}\n              onChange={handleDestinationInput}\n              placeholder={\"Destination (CIDR)\"}\n            />\n            <Divider\n              orientation=\"vertical\"\n              style={{\n                margin: \"10px\",\n              }}\n              flexItem\n            />\n            <TextField\n              value={via}\n              onChange={handleViaInput}\n              placeholder={\"Via (Optional)\"}\n            />\n            <IconButton size=\"small\" color=\"primary\" onClick={addRouteReq}>\n              <AddIcon\n                style={{\n                  fontSize: 16,\n                }}\n              />\n            </IconButton>\n          </List>\n        </Grid>\n      </Box>\n    </>\n  );\n}\n\nexport default ManagedRoutes;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}